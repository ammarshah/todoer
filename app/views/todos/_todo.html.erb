<li class="todo" data-controller="todo">
  <%= form_with(model: todo, data: { todo_target: "form" }) do |form| %>
    <%= form.hidden_field :completed, data: { todo_target: "completedHiddenField", original_value: todo.completed } %>
    <% unless todo.completed? %>
      <%= form.hidden_field :title, data: { todo_target: "titleHiddenField", original_value: todo.title } %>
    <% end %>
  <% end %>

  <div class="todo-status">
    <div class="todo-status-checkbox <%= "completed" if todo.completed? %>" data-action="click->todo#updateCompletedHiddenField click->todo#saveTodo">
      <%= image_tag "check.svg", size: "12x12" %>
    </div>
  </div>

  <div class="todo-title <%= "completed" if todo.completed? %>" <%= title_attributes unless todo.completed? %>>
    <%= todo.title %>
  </div>

  <div class="todo-actions">
    <%= button_to todo_path(todo), method: :delete do %>
      <%= image_tag "delete.svg", alt: "Delete todo", size: "16x16", class: "hoverlight delete" %>
    <% end %>
  </div>
</li>
